<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Thumbnail Generator</title>
    <!-- Add Phosphor Icons -->
    <!-- <script src="https://unpkg.com/@phosphor-icons/web"></script> -->
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        margin: 0;
        padding: 0;
        display: flex;
        width: 600px;
        height: 550px;
      }

      /* Main content area */
      .main-content {
        width: 300px;
        height: 550px;
        padding: 16px 12px 16px 12px;
        border-right: 1px solid #E1E4EA;
        box-sizing: border-box;
        background: white;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      .main-title {
        font-size: 14px;
        font-weight: 600;
        color: #2B303B;
        margin: 0 0 16px 0;
        flex-shrink: 0;
      }

      /* Preview panel */
      .preview-panel {
        width: 300px;
        height: 550px;
        padding: 16px 12px;
        background: white;
        display: flex;
        flex-direction: column;
        box-sizing: border-box;
      }

      .preview-header {
        font-size: 14px;
        font-weight: 600;
        color: #2B303B;
        margin-bottom: 16px;
      }

      .preview-content {
        width: 240px; /* Base width for preview */
        height: 135px; /* Maintains 16:9 ratio (240 * 9/16) */
        background: white;
        border: 1px solid #E1E4EA;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 24px auto;
        box-sizing: border-box;
        overflow: hidden;
        position: relative;
      }

      .preview-placeholder {
        font-size: 13px;
        color: #99A0AE;
        text-align: center;
        padding: 0 24px;
        position: relative;
        z-index: 1;
      }

      /* Section styles */
      .section {
        background: white;
        border: 1px solid #E1E4EA;
        border-radius: 8px;
        padding: 10px;
        cursor: pointer;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        justify-content: space-between;
        margin: 0;
        
      }

      .section:hover {
        background-color: #F2F5F8;
        transition: background-color 0.2s ease-in-out;
      }

      .section-title {
        font-size: 12px;
        font-weight: 500;
        color: #2B303B;
        margin: 0 0 4px 0;
        line-height: 120%;
      }

      .section-description {
        font-size: 10px;
        color: #99A0AE;
        margin: 0;
        font-weight: 400;
        line-height: 120%;
      }

      /* Button styles */
      .button-container {
        margin-top: 24px;
        padding: 0;
        border-top: none;
        flex-shrink: 0;
        justify-content: center;
        align-items: center;
      }

      button#generate {
        background: #E97135;
        color: white;
        border: 1px solid rgba(255, 255, 255, 0.30);
        box-shadow: 0px 0px 0px 1px #AD4E1F;
        border-radius: 8px;
        padding: 9px 12px 9px 12px;
        font-size: 12px;
        font-weight: 500;
        cursor: pointer;
        width: fit-content;
      }

      button#generate:hover {
        background: #D65E26;
        transition: background-color 0.2s ease;
      }

      /* Hide the old preview container */
      .preview-container {
        display: none;
      }

      input,
      textarea,
      select {
        width: 100%;
        padding: 8px;
        margin-bottom: 8px;
        border: 1px solid #ccc;
        border-radius: 4px;
      }
      textarea {
        height: 80px;
        resize: vertical;
      }
      button:hover {
        background-color: #0d8de3;
      }
      .control-group {
        margin-bottom: 16px;
      }
      .control-group label {
        display: block;
        margin-bottom: 4px;
        font-size: 12px;
        color: #333;
      }
      .row {
        display: flex;
        gap: 8px;
        margin-bottom: 8px;
      }
      .row > * {
        flex: 1;
      }
      /* Add new styles */
      .section-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 8px;
      }

      .header-left {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .status-text {
        font-size: 11px;
        color: #666;
      }

      .toggle-button {
        background-color: #f5f5f5;
        border: 1px solid #ddd;
        padding: 4px 8px;
        cursor: pointer;
        color: #333;
        width: auto;
        display: flex;
        align-items: center;
        gap: 4px;
        border-radius: 4px;
        transition: all 0.2s ease;
      }

      .toggle-button:hover {
        background-color: #e8e8e8;
        color: #18a0fb;
      }

      .toggle-button.active {
        background-color: #e3f2fd;
        color: #18a0fb;
        border-color: #18a0fb;
      }

      .toggle-text {
        font-size: 12px;
        font-weight: 500;
      }

      .description-section {
        display: none;
      }

      .description-section.active {
        display: block;
      }

      i {
        font-size: 16px;
      }

      /* Updated Preview styles */
      .preview-canvas {
        position: relative;
        width: 300px;
        height: 200px;
        margin: 16px 12px 16px 12px;
        background: #ffffff;
        overflow: hidden;
      }

      .preview-canvas.with-gradient::after {
        content: "";
        position: absolute;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        background: linear-gradient(
          180deg,
          rgba(0, 0, 0, 0) 0%,
          rgba(0, 0, 0, 0.7) 100%
        );
        pointer-events: none;
      }

      .preview-heading {
        font-size: calc(var(--heading-size, 32px) * 1);
        line-height: 1.2;
        margin-bottom: 32px;
        width: 100%;
        text-align: center;
      }

      .preview-description {
        font-size: calc(var(--description-size, 16px) * 1);
        line-height: 1.4;
        width: 100%;
        text-align: center;
      }

      /* Remove the safe area visual guide since it's not shown in Figma's UI */
      .safe-area {
        display: none;
      }

      .background-section,
      .heading-section {
        display: none;
      }

      .background-section.active,
      .heading-section.active {
        display: block;
      }

      .color-input-group {
        flex: 1;
      }

      .gradient-toggle {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .gradient-toggle input[type="checkbox"] {
        width: auto;
        margin: 0;
      }

      /* Update preview styles */
      .preview-canvas {
        background: white;
      }

      .preview-canvas.with-gradient::after {
        content: "";
        position: absolute;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        background: linear-gradient(
          180deg,
          rgba(0, 0, 0, 0) 0%,
          rgba(0, 0, 0, 0.7) 100%
        );
        pointer-events: none;
      }

      .position-select {
        width: auto;
        min-width: 100px;
      }

      .position-row {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 8px;
      }

      .position-row label {
        margin-bottom: 0;
        white-space: nowrap;
      }

      .position-input-group {
        flex: 1;
      }

      .position-input-group select {
        width: 100%;
      }

      /* Remove tag-related styles */
      /* .tags-section,
      .tag-item,
      .tag-header,
      .tag-title,
      .remove-tag,
      .add-tag-button {
        display: none;
      } */

      /* Add these styles and remove the display: none from existing tag styles */
      .tags-section {
        display: none;
      }

      .tags-section.active {
        display: block;
      }

      .tag-item {
        background: #f5f5f5;
        border: 1px solid #ddd;
        border-radius: 4px;
        padding: 8px;
        margin-bottom: 8px;
        display: block; /* Make sure it's visible */
      }

      .tag-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 8px;
      }

      .tag-title {
        font-size: 12px;
        font-weight: 500;
        color: #333;
        display: block;
      }

      .remove-tag {
        background: none;
        border: none;
        color: #666;
        padding: 4px;
        cursor: pointer;
        width: auto;
        display: flex;
        align-items: center;
      }

      .remove-tag:hover {
        color: #ff4444;
        background: none;
      }

      .add-tag-button {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 4px;
        margin-top: 8px;
      }

      .contributors-section {
        display: none;
      }

      .contributors-section.active {
        display: block;
      }

      .contributor-item {
        background: #f5f5f5;
        border: 1px solid #ddd;
        border-radius: 4px;
        padding: 8px;
        margin-bottom: 8px;
      }

      .contributor-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 8px;
      }

      .contributor-preview {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .contributor-avatar {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: #ddd;
      }

      .display-options {
        margin: 12px 0;
      }

      .display-mode-select {
        width: 100%;
      }

      .add-contributor-button {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 4px;
        margin-top: 8px;
      }

      /* Remove AI-related styles */
      .ai-section,
      .ai-content,
      .ai-prompt,
      .ai-options,
      .ask-ai-button {
        display: none;
      }

      /* Section grid layout */
      .sections-grid {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 8px;
        overflow-y: auto;
        padding-right: 8px;
      }

      /* Update two-column layout */
      .two-column-sections {
        display: flex;
        gap: 12px;
        margin: 0;
      }

      .two-column-sections .section {
        flex: 1;
      }

      /* Update icon styles */
      .section-icon {
        width: 16px;
        height: 16px;
        margin-bottom: 12px;
        color: #2B303B;
      }

      /* Add properties panel styles */
      .properties-panel {
        flex: 1;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      .properties-header {
        font-size: 14px;
        font-weight: 600;
        color: #2B303B;
        flex-shrink: 0;
      }

      .properties-content {
        flex: 1;
        padding: 16px;
        overflow-y: auto;
      }

      /* Property group styles */
      .property-group {
        margin-bottom: 16px;
      }

      .property-group-title {
        font-size: 12px;
        font-weight: 500;
        color: #2B303B;
        margin-bottom: 8px;
      }

      /* Property input styles */
      .property-input {
        margin-bottom: 12px;
      }

      .property-input label {
        display: block;
        font-size: 11px;
        color: #99A0AE;
        margin-bottom: 4px;
      }

      .property-input input,
      .property-input select {
        width: 100%;
        padding: 8px;
        border: 1px solid #E1E4EA;
        border-radius: 6px;
        font-size: 12px;
        color: #2B303B;
      }

      /* Color picker styles */
      .color-picker-input {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .color-preview {
        width: 32px;
        height: 32px;
        border-radius: 4px;
        border: 1px solid #E1E4EA;
      }

      /* Update preview elements container styles */
      .preview-elements {
        width: 1920px; /* Original width */
        height: 1080px; /* Original height */
        transform: scale(0.125); /* Scale down 1920 to 240 (240/1920 = 0.125) */
        transform-origin: center center;
        position: absolute;
        display: flex;
        flex-direction: column;
        padding: 120px 160px; /* Match SAFE_SPACE from TypeScript */
        box-sizing: border-box;
      }
    </style>
  </head>
  <body>
    <!-- Main content area -->
    <div class="main-content">
      <h1 class="main-title">Thumbnail Generator</h1>
      <div class="sections-grid">
        <!-- Background section (full width) -->
        <div class="section" id="backgroundSection">
          <svg class="section-icon" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M13.0001 8.7175L8.01072 13.7069C7.91786 13.7998 7.80761 13.8734 7.68627 13.9237C7.56493 13.974 7.43487 13.9998 7.30353 13.9998C7.17219 13.9998 7.04213 13.974 6.92079 13.9237C6.79945 13.8734 6.6892 13.7998 6.59634 13.7069L1.29322 8.40375C1.20034 8.31089 1.12666 8.20064 1.07639 8.0793C1.02612 7.95796 1.00024 7.8279 1.00024 7.69656C1.00024 7.56522 1.02612 7.43517 1.07639 7.31383C1.12666 7.19249 1.20034 7.08224 1.29322 6.98938L7.28259 1L14.5001 8.2175L13.0001 8.7175Z" stroke="#222530" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M7.75 8.5C8.44036 8.5 9 7.94036 9 7.25C9 6.55964 8.44036 6 7.75 6C7.05964 6 6.5 6.55964 6.5 7.25C6.5 7.94036 7.05964 8.5 7.75 8.5Z" stroke="#222530" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M6.86614 6.36625L2.49927 2" stroke="#222530" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M15.5 13C15.5 13.2652 15.3946 13.5196 15.2071 13.7071C15.0196 13.8946 14.7652 14 14.5 14C14.2348 14 13.9804 13.8946 13.7929 13.7071C13.6054 13.5196 13.5 13.2652 13.5 13C13.5 12 14.5 10.5 14.5 10.5C14.5 10.5 15.5 12 15.5 13Z" stroke="#222530" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          <div class="section-title">Background</div>
          <div class="section-description">Customise the background</div>
        </div>

        <!-- Two-column sections -->
         <div class="two-column-sections"> 
           <div class="section" id="headingSection">
            <svg class="section-icon" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M2.5 3.5V11" stroke="#222530" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M9 7.25H2.5" stroke="#222530" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M9 3.5V11" stroke="#222530" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M14 13V7L12.5 8" stroke="#222530" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>              
             <div class="section-title">Heading</div>
             <div class="section-description">Add project heading</div>
           </div>
   
           <div class="section" id="descriptionSection">
            <svg class="section-icon" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M8 3.5V12.5" stroke="#222530" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M3.5 5.5V3.5H12.5V5.5" stroke="#222530" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M6 12.5H10" stroke="#222530" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              
             <div class="section-title">Description</div>
             <div class="section-description">Add project description</div>
           </div>
         </div>

         <div class="two-column-sections">
          <div class="section" id="tagsSection">
            <svg class="section-icon" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M2.64625 8.64625C2.55266 8.55255 2.50006 8.42556 2.5 8.29313V2.5H8.29313C8.42556 2.50006 8.55255 2.55266 8.64625 2.64625L14.8538 8.85375C14.9474 8.94751 15.0001 9.07464 15.0001 9.20719C15.0001 9.33974 14.9474 9.46687 14.8538 9.56063L9.5625 14.8538C9.46874 14.9474 9.34161 15.0001 9.20906 15.0001C9.07651 15.0001 8.94938 14.9474 8.85563 14.8538L2.64625 8.64625Z" stroke="#222530" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M5.5 5.25C5.5 5.38807 5.38807 5.5 5.25 5.5C5.11193 5.5 5 5.38807 5 5.25C5 5.11193 5.11193 5 5.25 5C5.38807 5 5.5 5.11193 5.5 5.25Z" fill="#343330" stroke="#222530"/>
              </svg>
            <div class="section-title">Tags</div>
            <div class="section-description">Add a project tags</div>
          </div>

          <div class="section" id="contributorsSection">
            <svg class="section-icon" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M8 10C10.2091 10 12 8.20914 12 6C12 3.79086 10.2091 2 8 2C5.79086 2 4 3.79086 4 6C4 8.20914 5.79086 10 8 10Z" stroke="#222530" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M2 13.5C3.21063 11.4081 5.40937 10 8 10C10.5906 10 12.7894 11.4081 14 13.5" stroke="#222530" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              
            <div class="section-title">Contributors</div>
            <div class="section-description">Add project contributors</div>
          </div>
         </div>
      </div>
      <div class="button-container">
        <button id="generate">Generate thumbnail</button>
      </div>
    </div>

    <!-- Preview panel -->
    <div class="preview-panel">
      <!-- Preview section -->


         <div class="preview-header">
           Preview
         </div>
         <div class="preview-content">
           <div class="preview-placeholder">
             Select an element to preview
           </div>
         </div>

      
      <!-- Properties section -->

         <div class="properties-panel">
           <div class="properties-header">
             Select an element to edit properties
           </div>
           <div class="properties-content">
             <!-- Background properties -->
             <div id="backgroundProperties" class="property-group" style="display: none;">
               <div class="property-input">
                 <label>Background Color</label>
                 <div class="color-picker-input">
                   <input type="color" id="backgroundColor" value="#FFFFFF">
                   <div class="color-preview" style="background-color: #FFFFFF"></div>
                 </div>
               </div>
               <div class="property-input">
                 <label>
                   <input type="checkbox" id="gradientToggle">
                   Add gradient overlay
                 </label>
               </div>
             </div>

             <!-- Heading properties -->
             <div id="headingProperties" class="property-group" style="display: none;">
               <div class="property-input">
                 <label>Heading Text</label>
                 <input type="text" id="headingText" placeholder="Enter heading">
               </div>
               <div class="property-input">
                 <label>Font Size</label>
                 <input type="number" id="headingSize" value="32" min="12" max="96">
               </div>
               <div class="property-input">
                 <label>Color</label>
                 <input type="color" id="headingColor" value="#000000">
               </div>
             </div>

             <!-- Description properties -->
             <div id="descriptionProperties" class="property-group" style="display: none;">
               <div class="property-input">
                 <label>Description Text</label>
                 <textarea id="descriptionText" placeholder="Enter description"></textarea>
               </div>
               <div class="property-input">
                 <label>Font Size</label>
                 <input type="number" id="descriptionSize" value="16" min="10" max="48">
               </div>
               <div class="property-input">
                 <label>Color</label>
                 <input type="color" id="descriptionColor" value="#666666">
               </div>
             </div>
           </div>
         </div>

    </div>

    <script>
      // Get all sections and property groups
      const sections = document.querySelectorAll('.section');
      const propertyGroups = document.querySelectorAll('.property-group');
      const propertiesHeader = document.querySelector('.properties-header');
      const previewContent = document.querySelector('.preview-content');
      const previewPlaceholder = document.querySelector('.preview-placeholder');
      const generateButton = document.getElementById('generate');

      // State object to store current values
      const state = {
        activeSection: null,
        background: {
          color: '#FFFFFF',
          gradient: false
        },
        heading: {
          text: '',
          size: 32,
          color: '#000000'
        },
        description: {
          text: '',
          size: 16,
          color: '#666666'
        }
      };

      // Handle section selection
      sections.forEach(section => {
        section.addEventListener('click', () => {
          // Remove active class from all sections
          sections.forEach(s => s.classList.remove('active'));
          
          // Add active class to clicked section
          section.classList.add('active');
          state.activeSection = section.id;
          
          // Hide all property groups
          propertyGroups.forEach(group => group.style.display = 'none');
          
          // Get section name from the section-title
          const sectionName = section.querySelector('.section-title').textContent;
          
          // Update properties header
          propertiesHeader.textContent = `${sectionName} Properties`;
          
          // Show corresponding property group
          const propertyId = section.id.replace('Section', 'Properties');
          const propertyGroup = document.getElementById(propertyId);
          if (propertyGroup) {
            propertyGroup.style.display = 'block';
          }

          // Hide placeholder when a section is selected
          previewPlaceholder.style.display = 'none';
          
          // Update preview
          updatePreview();
        });
      });

      // Handle property changes
      document.addEventListener('change', handlePropertyChange);
      document.addEventListener('input', handlePropertyChange);

      function handlePropertyChange(event) {
        const target = event.target;
        
        // Update state based on input changes
        switch(target.id) {
          case 'backgroundColor':
            state.background.color = target.value;
            break;
          case 'gradientToggle':
            state.background.gradient = target.checked;
            break;
          case 'headingText':
            state.heading.text = target.value;
            break;
          case 'headingSize':
            state.heading.size = parseInt(target.value) || 32;
            break;
          case 'headingColor':
            state.heading.color = target.value;
            break;
          case 'descriptionText':
            state.description.text = target.value;
            break;
          case 'descriptionSize':
            state.description.size = parseInt(target.value) || 16;
            break;
          case 'descriptionColor':
            state.description.color = target.value;
            break;
        }

        // Handle color picker preview
        if (target.type === 'color') {
          const preview = target.parentElement.querySelector('.color-preview');
          if (preview) {
            preview.style.backgroundColor = target.value;
          }
        }
        
        // Update preview
        requestAnimationFrame(updatePreview);
      }

      function updatePreview() {
        // Update background
        if (state.background.gradient) {
          previewContent.style.background = `linear-gradient(180deg, ${state.background.color} 0%, rgba(0, 0, 0, 0.7) 100%)`;
        } else {
          previewContent.style.background = state.background.color;
        }

        // Clear existing preview content except placeholder
        const elements = previewContent.querySelectorAll(':not(.preview-placeholder)');
        elements.forEach(el => el.remove());

        // Create preview elements container
        const previewElements = document.createElement('div');
        previewElements.className = 'preview-elements';

        // Add heading if exists
        if (state.heading.text) {
          const heading = document.createElement('div');
          heading.className = 'preview-heading';
          heading.textContent = state.heading.text;
          heading.style.fontSize = `${state.heading.size}px`;
          heading.style.color = state.heading.color;
          heading.style.fontWeight = '600';
          previewElements.appendChild(heading);
        }

        // Add description if exists
        if (state.description.text) {
          const description = document.createElement('div');
          description.className = 'preview-description';
          description.textContent = state.description.text;
          description.style.fontSize = `${state.description.size}px`;
          description.style.color = state.description.color;
          previewElements.appendChild(description);
        }

        // Add elements to preview if there's content
        if (state.heading.text || state.description.text) {
          previewContent.appendChild(previewElements);
          previewPlaceholder.style.display = 'none';
        } else {
          previewPlaceholder.style.display = 'block';
        }
      }

      // Handle generate button click
      generateButton.addEventListener('click', () => {
        parent.postMessage({ 
          pluginMessage: {
            type: 'generate-thumbnail',
            heading: state.heading.text,
            description: state.description.text,
            styles: {
              background: state.background,
              heading: {
                size: state.heading.size,
                color: state.heading.color,
                font: 'Inter',
                weight: 'Bold',
                position: 'center'
              },
              description: {
                size: state.description.size,
                color: state.description.color,
                font: 'Inter',
                weight: 'Regular',
                position: 'center'
              }
            }
          }
        }, '*');
      });
    </script>
  </body>
</html>




